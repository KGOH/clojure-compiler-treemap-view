<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{TITLE}}</title>
  <script>{{D3}}</script>
  <style>
{{CSS}}
  </style>
</head>
<body>
  <div class="controls">
    <div class="breadcrumb" id="breadcrumb"></div>
    <div class="controls-right">
      <div class="control-group">
        <label for="source-select">Source:</label>
        <select id="source-select"></select>
      </div>
      <div class="control-group">
        <label for="size-select">Size:</label>
        <select id="size-select"></select>
      </div>
      <div class="control-group">
        <label for="color-select">Color:</label>
        <select id="color-select"></select>
      </div>
      <div class="control-group">
        <input type="checkbox" id="show-labels">
        <label for="show-labels">Show names</label>
      </div>
      <div class="search-container">
        <input type="text" id="search-input" placeholder="Search ns/symbol...">
        <div class="suggestions" id="suggestions"></div>
      </div>
      <button id="upload-btn" class="upload-btn" title="Load JSON file">üìÅ Load</button>
    </div>
  </div>
  <div class="info-panel" id="info-panel"></div>
  <div class="treemap-container">
    <div id="treemap"></div>
  </div>

  <!-- Upload overlay (shown when no data or user clicks Load) -->
  <div id="upload-overlay" class="upload-overlay">
    <div id="upload-zone" class="upload-zone">
      <div class="upload-icon">üìÅ</div>
      <div class="upload-text">Drop JSON file here or click to select</div>
      <div class="upload-hint">Export from REPL: (export-metrics '[ns1 ns2] "metrics.json")</div>
    </div>
  </div>
  <input type="file" id="file-input" accept=".json" style="display: none;">

  <script>
    // Embedded data (set by render-html, or null for standalone viewer)
    window.TREEMAP_DATA = {{DATA}};
  </script>
  <script>
{{JS}}
  </script>
</body>
</html>
